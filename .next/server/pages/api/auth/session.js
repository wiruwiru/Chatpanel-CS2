"use strict";(()=>{var e={};e.id=756,e.ids=[756],e.modules={97:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>u});var n=s(666),a=s(829),o=s(5035),i=e([o]);async function u(e,t){if("GET"===e.method){let s=(0,n.parse)(e.headers.cookie||"").session;if(s)try{let e=(0,a.verify)(s,process.env.SESSION_SECRET),r=process.env.STEAM_API_KEY,n=e.steamId64,i=await (0,o.default)(`http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=${r}&steamids=${n}`),u=await i.json();if(u.response&&u.response.players&&u.response.players.length>0){let t=u.response.players[0];e.displayName=t.personaname,e.avatarUrl=t.avatarmedium}t.status(200).json({user:e})}catch(e){console.error("Error verifying session:",e),t.status(200).json({user:null,error:e.message})}else t.status(200).json({user:null,message:"No session token found"})}else t.status(405).json({message:"Method not allowed"})}o=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},666:e=>{e.exports=require("cookie")},829:e=>{e.exports=require("jsonwebtoken")},3480:(e,t,s)=>{e.exports=s(5600)},4122:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>l,default:()=>p,routeModule:()=>d});var n=s(3480),a=s(8667),o=s(6435),i=s(97),u=e([i]);i=(u.then?(await u)():u)[0];let p=(0,o.M)(i,"default"),l=(0,o.M)(i,"config"),d=new n.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/auth/session",pathname:"/api/auth/session",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},5035:e=>{e.exports=import("node-fetch")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=4122);module.exports=s})();
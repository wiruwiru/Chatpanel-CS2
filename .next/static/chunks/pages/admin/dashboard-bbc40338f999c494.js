(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{272:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>I});var s=r(7876),t=r(4232),l=r(9099),i=r(369),n=r(9567),o=r(7446),d=r(2195),c=r(7271),u=r(4846),m=r(7216);function h(e){var a;let{user:r}=e;return(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,s.jsxs)(m.eu,{className:"h-16 w-16",children:[(0,s.jsx)(m.BK,{src:r.avatarUrl||"/placeholder-avatar.png",alt:"User Avatar"}),(0,s.jsx)(m.q5,{children:(null===(a=r.displayName)||void 0===a?void 0:a.charAt(0))||"U"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:r.displayName||"User"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["(",r.steamId64,")"]})]})]})}var f=r(9983),p=r(3397),x=r(3707);function g(e){let{authorizedUsers:a,steamProfiles:r,onRemoveUser:l,onUpdateRole:i,isLoading:n,t:d}=e,[c,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/admin/roles");if(e.ok){let a=await e.json();u(a.roles)}}catch(e){console.error("Error fetching roles:",e)}finally{p(!1)}})()},[]),n||h)?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"})}):0===a.length?(0,s.jsx)("p",{className:"mb-4",children:d("dashboard.noAuthorizedUsers")}):(0,s.jsx)("ul",{className:"mb-6 space-y-2",children:a.map(e=>{var a,t,n,o;return(0,s.jsxs)("li",{className:"flex justify-between items-center p-2 bg-accent rounded",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(m.eu,{className:"h-10 w-10",children:[(0,s.jsx)(m.BK,{src:(null===(a=r[e.steam_id])||void 0===a?void 0:a.avatarUrl)||"/placeholder-avatar.png",alt:"".concat((null===(t=r[e.steam_id])||void 0===t?void 0:t.displayName)||"User","'s avatar")}),(0,s.jsx)(m.q5,{children:((null===(n=r[e.steam_id])||void 0===n?void 0:n.displayName)||"U").charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null===(o=r[e.steam_id])||void 0===o?void 0:o.displayName)||d("dashboard.unknownUser")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.steam_id})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(x.l6,{value:e.role,onValueChange:a=>i(e.steam_id,a),children:[(0,s.jsx)(x.bq,{className:"w-[45px] xs:w-[100px] sm:w-[120px] md:w-[140px] bg-background/50 backdrop-blur-sm",children:(0,s.jsx)(x.yv,{placeholder:d("dashboard.role")})}),(0,s.jsx)(x.gC,{children:c.map(e=>(0,s.jsx)(x.eb,{value:e.name,children:e.name},e.id))})]}),(0,s.jsx)(f.$,{onClick:()=>l(e.steam_id),variant:"destructive",size:"sm",children:d("dashboard.remove")})]})]},e.steam_id)})})}function v(e){let{t:a,toast:r}=e,[l,i]=(0,t.useState)(""),[n,d]=(0,t.useState)("owner"),[c,u]=(0,t.useState)([]),[m,h]=(0,t.useState)(!0),{authorizedUsers:v,steamProfiles:j,addUser:b,removeUser:y,updateUserRole:N,isLoading:w}=function(e){let{toast:a}=e,[r,s]=(0,t.useState)([]),[l,i]=(0,t.useState)({}),[n,o]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null),u=async e=>{try{let a=await fetch("/api/steam/profiles?ids=".concat(e.join(",")));if(!a.ok)throw Error("Failed to fetch Steam profiles");let r=await a.json();i(e=>({...e,...r}))}catch(e){console.error("Error fetching Steam profiles:",e),c("Failed to fetch user profiles. Please try again later.")}},m=async()=>{try{o(!0);let e=await fetch("/api/admin/authorized-users");if(!e.ok)throw Error("Failed to fetch authorized users");let a=await e.json();s(a.users||[]);let r=a.users.map(e=>e.steam_id);r.length>0&&await u(r)}catch(e){console.error("Error fetching authorized users:",e),c("Failed to fetch authorized users. Please try again later.")}finally{o(!1)}},h=async(e,r)=>{try{let s=await fetch("/api/admin/authorized-users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({steamId:e,role:r})});if(s.ok)return await m(),a({title:"Success",description:"User added successfully"}),!0;{let e=await s.json();throw Error(e.message||"Failed to add user")}}catch(e){return console.error("Error adding user:",e),a({title:"Error",description:e.message,variant:"destructive"}),!1}},f=async e=>{try{let r=await fetch("/api/admin/authorized-users?steamId=".concat(e),{method:"DELETE"});if(r.ok)return await m(),a({title:"Success",description:"User removed successfully"}),!0;{let e=await r.json();throw Error(e.message||"Failed to remove user")}}catch(e){return console.error("Error removing user:",e),a({title:"Error",description:e.message,variant:"destructive"}),!1}},p=async(e,r)=>{try{let s=await fetch("/api/admin/authorized-users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({steamId:e,role:r})});if(s.ok)return await m(),a({title:"Success",description:"User role updated successfully"}),!0;{let e=await s.json();throw Error(e.message||"Failed to update user role")}}catch(e){return console.error("Error updating user role:",e),a({title:"Error",description:e.message,variant:"destructive"}),!1}};return(0,t.useEffect)(()=>{m()},[]),{authorizedUsers:r,steamProfiles:l,isLoading:n,error:d,fetchAuthorizedUsers:m,addUser:h,removeUser:f,updateUserRole:p}}({toast:r});(0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/admin/roles");if(e.ok){let a=await e.json();u(a.roles);let r=a.roles.find(e=>"owner"===e.name);r?d(r.name):a.roles.length>0&&d(a.roles[0].name)}}catch(e){console.error("Error fetching roles:",e)}finally{h(!1)}}()},[]);let E=async e=>{e.preventDefault(),await b(l,n),i("");let a=c.find(e=>"owner"===e.name);d(a?a.name:c.length>0?c[0].name:"owner")};return m?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"})}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a("dashboard.authorizedUsers")}),(0,s.jsx)(g,{authorizedUsers:v,steamProfiles:j,onRemoveUser:y,onUpdateRole:N,isLoading:w,t:a}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(p.p,{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:a("dashboard.enterSteamID64"),className:"flex-grow",required:!0}),(0,s.jsxs)(x.l6,{value:n,onValueChange:d,children:[(0,s.jsx)(x.bq,{className:"w-[100px]",children:(0,s.jsx)(x.yv,{placeholder:a("dashboard.role")})}),(0,s.jsx)(x.gC,{children:c.map(e=>(0,s.jsx)(x.eb,{value:e.name,children:e.name},e.id))})]})]}),(0,s.jsx)(f.$,{type:"submit",className:"w-full",children:a("dashboard.addUser")})]})]})}function j(e){let{imageUrl:a,onChange:r,onUpdate:t,t:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:l("dashboard.imageUrl")}),(0,s.jsx)(p.p,{id:"imageUrl",type:"text",value:a,onChange:e=>r(e.target.value),placeholder:l("dashboard.enterImageUrl"),className:"w-full"}),(0,s.jsx)(f.$,{onClick:t,className:"w-full mt-2",children:l("dashboard.updateImageUrl")})]})}var b=r(9081),y=r(2089),N=r(5104);function w(e){let{onServersDetected:a,t:r}=e,[l,i]=(0,t.useState)(!1),n=async()=>{i(!0);try{let e=await fetch("/api/admin/detect-servers",{method:"POST"});if(!e.ok)throw Error("Failed to detect servers");let r=await e.json();return a&&r.serverOptions&&a(r.serverOptions),r}catch(e){throw console.error("Error detecting servers:",e),e}finally{i(!1)}};return(0,s.jsx)(f.$,{onClick:n,disabled:l,variant:"outline",className:"w-full mt-2",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),r?r("dashboard.detectingServers"):"Detectando..."]}):r?r("dashboard.detectServersAutomatically"):"Detectar servidores autom\xe1ticamente"})}function E(e){let{serverOptions:a,onAddOption:r,onRemoveOption:t,onOptionChange:l,onUpdate:i,isLoading:n,t:o,toast:d}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o("dashboard.serverOptions")," (",o("dashboard.serverOptionsFormat"),")"]}),(0,s.jsx)(b.Zp,{children:(0,s.jsxs)(b.Wu,{className:"pt-6",children:[a.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(p.p,{type:"text",value:e.label,onChange:e=>l(a,"label",e.target.value),placeholder:o("dashboard.serverName"),className:"flex-grow"}),(0,s.jsx)(p.p,{type:"text",value:e.value,onChange:e=>l(a,"value",e.target.value),placeholder:o("dashboard.serverId"),className:"flex-grow"}),(0,s.jsx)(f.$,{onClick:()=>t(a),variant:"destructive",size:"icon",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})})]},a)),(0,s.jsxs)(f.$,{onClick:r,variant:"outline",className:"w-full mt-2",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"})," ",o("dashboard.addServerOption")]}),(0,s.jsx)(w,{onServersDetected:e=>{if(e.forEach((e,s)=>{s<a.length?(l(s,"label",e.label),l(s,"value",e.value)):(r(),l(a.length,"label",e.label),l(a.length,"value",e.value))}),e.length<a.length)for(let r=a.length-1;r>=e.length;r--)t(r);d({title:"Success",description:"".concat(e.length," servers detected successfully")})},t:o})]})}),(0,s.jsx)(f.$,{onClick:i,className:"w-full mt-2",children:o("dashboard.updateServerOptions")})]})}function S(e){let{t:a,toast:r}=e,{config:l,configForm:i,handleConfigChange:n,handleUpdateConfig:o,handleAddServerOption:d,handleRemoveServerOption:c,handleServerOptionChange:u,isLoading:m}=function(e){let{toast:a}=e,[r,s]=(0,t.useState)({}),[l,i]=(0,t.useState)({IMAGE_URL:"",SERVER_OPTIONS:[]}),[n,o]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null),u=async()=>{try{o(!0);let e=await fetch("/api/admin/config");if(!e.ok)throw Error("Failed to fetch configuration");let a=await e.json();s(a),i({IMAGE_URL:a.IMAGE_URL||"",SERVER_OPTIONS:JSON.parse(a.SERVER_OPTIONS||"[]")})}catch(e){console.error("Error fetching configuration:",e),c("Failed to fetch configuration. Please try again later.")}finally{o(!1)}},m=async e=>{try{let r=l[e];"SERVER_OPTIONS"===e&&(r=JSON.stringify(r));let s=await fetch("/api/admin/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,value:r})});if(s.ok)return await u(),a({title:"Success",description:"".concat(e," updated successfully")}),!0;{let e=await s.json();throw Error(e.message||"Failed to update configuration")}}catch(e){return console.error("Error updating configuration:",e),a({title:"Error",description:e.message,variant:"destructive"}),!1}};return(0,t.useEffect)(()=>{u()},[]),{config:r,configForm:l,isLoading:n,error:d,fetchConfig:u,handleConfigChange:(e,a)=>{i(r=>({...r,[e]:a}))},handleUpdateConfig:m,handleAddServerOption:()=>{i(e=>({...e,SERVER_OPTIONS:[...e.SERVER_OPTIONS,{label:"",value:""}]}))},handleRemoveServerOption:e=>{i(a=>({...a,SERVER_OPTIONS:a.SERVER_OPTIONS.filter((a,r)=>r!==e)}))},handleServerOptionChange:(e,a,r)=>{i(s=>({...s,SERVER_OPTIONS:s.SERVER_OPTIONS.map((s,t)=>t===e?{...s,[a]:r}:s)}))}}}({toast:r});return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a("dashboard.configuration")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(j,{imageUrl:i.IMAGE_URL,onChange:e=>n("IMAGE_URL",e),onUpdate:()=>o("IMAGE_URL"),t:a}),(0,s.jsx)(E,{serverOptions:i.SERVER_OPTIONS,onAddOption:d,onRemoveOption:c,onOptionChange:u,onUpdate:()=>o("SERVER_OPTIONS"),isLoading:m,t:a,toast:r})]})]})}var R=r(8928);let k=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("textarea",{className:(0,R.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...t})});k.displayName="Textarea";var O=r(9470),C=r(5259);let _=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(O.bL,{ref:a,className:(0,R.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...t,children:(0,s.jsx)(O.C1,{className:(0,R.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(C.Srz,{className:"h-4 w-4"})})})});_.displayName=O.bL.displayName;var U=r(345),T=r(3022);function F(){let[e,a]=(0,t.useState)(null),[r,s]=(0,t.useState)(!0),[l,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{s(!0);let e=await fetch("/api/auth/session");if(!e.ok)throw Error("Failed to fetch user session");let r=await e.json();a(r.user)}catch(e){console.error("Error fetching user:",e),i(e.message)}finally{s(!1)}})()},[]),{user:e,isLoading:r,error:l}}function A(e){let{t:a,toast:r}=e,[l,i]=(0,t.useState)({name:"",description:""}),[n,d]=(0,t.useState)(null),{user:c}=F(),{roles:u,pages:m,rolePages:h,isLoading:x,addRole:g,updateRole:v,deleteRole:j,updateRolePages:w,fetchRoles:E,fetchPages:S,fetchRolePages:R}=function(e){let{toast:a}=e,[r,s]=(0,t.useState)([]),[l,i]=(0,t.useState)([]),[n,o]=(0,t.useState)([]),[d,c]=(0,t.useState)(!1),u=(0,t.useCallback)(async()=>{c(!0);try{let e=await fetch("/api/admin/roles");if(!e.ok)throw Error("Failed to fetch roles");let a=await e.json();s(a.roles)}catch(e){console.error("Error fetching roles:",e),a({title:"Error",description:"Failed to fetch roles",variant:"destructive"})}finally{c(!1)}},[a]),m=(0,t.useCallback)(async()=>{c(!0);try{let e=await fetch("/api/admin/pages");if(!e.ok)throw Error("Failed to fetch pages");let a=await e.json();i(a.pages)}catch(e){console.error("Error fetching pages:",e),a({title:"Error",description:"Failed to fetch pages",variant:"destructive"})}finally{c(!1)}},[a]),h=(0,t.useCallback)(async()=>{c(!0);try{let e=await fetch("/api/admin/role-pages");if(!e.ok)throw Error("Failed to fetch role pages");let a=await e.json();o(a.rolePages)}catch(e){console.error("Error fetching role pages:",e),a({title:"Error",description:"Failed to fetch role pages",variant:"destructive"})}finally{c(!1)}},[a]),f=async(e,r)=>{c(!0);try{if(!(await fetch("/api/admin/roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:r})})).ok)throw Error("Failed to add role");a({title:"Success",description:"Role added successfully"}),await u()}catch(e){console.error("Error adding role:",e),a({title:"Error",description:"Failed to add role",variant:"destructive"})}finally{c(!1)}},p=async(e,r,s)=>{c(!0);try{let t=await fetch("/api/admin/roles/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,description:s})});if(!t.ok){let e=await t.text(),a="Failed to update role";try{a=JSON.parse(e).message||a}catch(a){console.error("Error parsing error response:",e)}throw Error(a)}a({title:"Success",description:"Role updated successfully"}),await u()}catch(e){console.error("Error updating role:",e),a({title:"Error",description:e.message||"Failed to update role",variant:"destructive"})}finally{c(!1)}},x=async e=>{c(!0);try{if(!(await fetch("/api/admin/roles/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete role");a({title:"Success",description:"Role deleted successfully"}),await u()}catch(e){console.error("Error deleting role:",e),a({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{c(!1)}},g=async(e,r,s)=>{c(!0);try{let t=s?"/api/admin/role-pages":"/api/admin/role-pages?roleId=".concat(e,"&pageId=").concat(r);if(!(await fetch(t,{method:s?"POST":"DELETE",headers:{"Content-Type":"application/json"},body:s?JSON.stringify({roleId:e,pageId:r}):void 0})).ok)throw Error("Failed to update role page access");a({title:"Success",description:"Page access updated successfully"}),await h()}catch(e){console.error("Error updating role page access:",e),a({title:"Error",description:"Failed to update page access",variant:"destructive"})}finally{c(!1)}};return{roles:r,pages:l,rolePages:n,isLoading:d,fetchRoles:u,fetchPages:m,fetchRolePages:h,addRole:f,updateRole:p,deleteRole:x,updateRolePages:g}}({toast:r});(0,t.useEffect)(()=>{E(),S(),R()},[E,S,R]);let O=async e=>{e.preventDefault(),await g(l.name,l.description),i({name:"",description:""})},C=e=>{d({...e})},A=async()=>{try{await v(n.id,n.name,n.description),d(null)}catch(e){console.error("Error saving role:",e)}},P=async e=>{await j(e)},I=async(e,a,r)=>{await w(e,a,r)},z=(e,a)=>h.some(r=>r.role_id===e&&r.page_id===a),L=e=>"owner"===e,V=e=>a("roles.".concat(e),e),D=e=>a("pages.".concat(e),e);return x?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"})}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a("dashboard.roles")}),(0,s.jsxs)(b.Zp,{className:"mb-6",children:[(0,s.jsx)(b.aR,{children:(0,s.jsx)(b.ZB,{className:"text-lg",children:a("dashboard.addNewRole")})}),(0,s.jsx)(b.Wu,{children:(0,s.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:a("dashboard.roleName")}),(0,s.jsx)(p.p,{value:l.name,onChange:e=>i({...l,name:e.target.value}),placeholder:a("dashboard.enterRoleName"),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:a("dashboard.roleDescription")}),(0,s.jsx)(k,{value:l.description,onChange:e=>i({...l,description:e.target.value}),placeholder:a("dashboard.enterRoleDescription"),rows:2})]}),(0,s.jsxs)(f.$,{type:"submit",className:"w-full",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"})," ",a("dashboard.addRole")]})]})})]}),(0,s.jsx)("div",{className:"space-y-6",children:u.map(e=>(0,s.jsxs)(b.Zp,{className:"overflow-hidden",children:[(0,s.jsxs)(b.aR,{className:"bg-accent/30",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(b.ZB,{className:"text-lg",children:n&&n.id===e.id?(0,s.jsx)(p.p,{value:n.name,onChange:e=>d({...n,name:e.target.value}),className:"font-bold"}):(0,s.jsx)("span",{children:V(e.name)})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[n&&n.id===e.id?(0,s.jsxs)(f.$,{onClick:A,size:"sm",variant:"outline",children:[(0,s.jsx)(U.A,{className:"h-4 w-4 mr-1"})," ",a("dashboard.save")]}):!L(e.name)&&(0,s.jsxs)(f.$,{onClick:()=>C(e),size:"sm",variant:"outline",children:[(0,s.jsx)(T.A,{className:"h-4 w-4 mr-1"})," ",a("dashboard.edit")]}),!L(e.name)&&(0,s.jsx)(f.$,{onClick:()=>P(e.id),size:"sm",variant:"destructive",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})})]})]}),n&&n.id===e.id?(0,s.jsx)(k,{value:n.description,onChange:e=>d({...n,description:e.target.value}),className:"mt-2",rows:2}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsxs)(b.Wu,{className:"pt-4",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:a("dashboard.pageAccess")}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(a=>(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(_,{id:"page-".concat(e.id,"-").concat(a.id),checked:z(e.id,a.id),onCheckedChange:r=>I(e.id,a.id,r),disabled:"owner"===e.name||"roles"===a.name&&"owner"!==e.name}),(0,s.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,s.jsx)("label",{htmlFor:"page-".concat(e.id,"-").concat(a.id),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:D(a.name)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]})]},a.id))}),"owner"===e.name&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-3 italic",children:a("dashboard.ownerHasAllAccess")}),"owner"!==e.name&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-3 italic",children:a("dashboard.roleManagementOwnerOnly")})]})]},e.id))})]})}var P=r(700);function I(){let{t:e}=(0,u.Bd)(),{toast:a}=(0,c.dj)(),r=(0,l.useRouter)(),{user:m,isLoading:f,error:p}=F(),{hasPageAccess:x}=(0,P.S)();if((0,t.useEffect)(()=>{f||m&&x(m,"dashboard")||r.push("/")},[m,f,r,x]),f)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})});if(p)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)("div",{className:"text-lg text-destructive",children:[e("common.error"),": ",p]})});if(!m)return null;let g="owner"===m.role;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-24 flex-1",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto bg-card rounded-lg shadow-md p-7 mb-8",children:[(0,s.jsx)(h,{user:m}),(0,s.jsx)("hr",{className:"border-b border-border my-4"}),(0,s.jsxs)(d.tU,{defaultValue:"users",children:[(0,s.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(d.Xi,{value:"users",children:e("dashboard.authorizedUsers")}),(0,s.jsx)(d.Xi,{value:"config",children:e("dashboard.configuration")}),g&&(0,s.jsx)(d.Xi,{value:"roles",children:e("dashboard.roles")})]}),(0,s.jsx)(d.av,{value:"users",children:(0,s.jsx)(v,{t:e,toast:a})}),(0,s.jsx)(d.av,{value:"config",children:(0,s.jsx)(S,{t:e,toast:a})}),g&&(0,s.jsx)(d.av,{value:"roles",children:(0,s.jsx)(A,{t:e,toast:a})})]})]})}),(0,s.jsx)(n.A,{})]})}},2195:(e,a,r)=>{"use strict";r.d(a,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>n});var s=r(7876),t=r(4232),l=r(1592),i=r(8928);let n=l.bL,o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.B8,{ref:a,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...t})});o.displayName=l.B8.displayName;let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...t})});d.displayName=l.l9.displayName;let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});c.displayName=l.UC.displayName},3397:(e,a,r)=>{"use strict";r.d(a,{p:()=>i});var s=r(7876),t=r(4232),l=r(8928);let i=t.forwardRef((e,a)=>{let{className:r,type:t,...i}=e;return(0,s.jsx)("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...i})});i.displayName="Input"},6242:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return r(272)}])},7216:(e,a,r)=>{"use strict";r.d(a,{BK:()=>o,eu:()=>n,q5:()=>d});var s=r(7876),t=r(4232),l=r(8194),i=r(8928);let n=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.bL,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t})});n.displayName=l.bL.displayName;let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l._V,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",r),...t})});o.displayName=l._V.displayName;let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.H4,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t})});d.displayName=l.H4.displayName},9081:(e,a,r)=>{"use strict";r.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var s=r(7876),t=r(4232),l=r(8928);let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...t})});i.displayName="Card";let n=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...t})});n.displayName="CardHeader";let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...t})});o.displayName="CardTitle";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",r),...t})});d.displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...t})});c.displayName="CardContent",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},9567:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});var s=r(7876),t=r(8230),l=r.n(t),i=r(4846);function n(){let{t:e}=(0,i.Bd)(),a=new Date().getFullYear();return(0,s.jsx)("footer",{className:"py-6 text-center border-t border-border",children:(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)(l(),{href:"/",className:"hover:text-primary transition-colors",children:"ChatPanel"})," ",e("footer.copyright")," \xa9 ",a," | ",e("footer.designBy")," ",(0,s.jsx)(l(),{href:"https://lucauy.dev",target:"_blank",rel:"nofollow",className:"hover:text-primary transition-colors",children:"Luca."})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[808,513,369,636,593,792],()=>a(6242)),_N_E=e.O()}]);
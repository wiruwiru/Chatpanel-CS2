(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{594:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(7368)}])},3397:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var a=t(7876),s=t(4232),n=t(8928);let l=s.forwardRef((e,r)=>{let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...l})});l.displayName="Input"},5959:(e,r,t)=>{"use strict";t.d(r,{Eb:()=>f,Iu:()=>o,M_:()=>h,WA:()=>m,cU:()=>d,dK:()=>i,n$:()=>u});var a=t(7876),s=t(4232),n=t(8928),l=t(9983),c=t(5259);let i=e=>{let{className:r,...t}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",r),...t})};i.displayName="Pagination";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("ul",{ref:r,className:(0,n.cn)("flex flex-row items-center gap-1",t),...s})});o.displayName="PaginationContent";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("li",{ref:r,className:(0,n.cn)("",t),...s})});d.displayName="PaginationItem";let u=e=>{let{className:r,isActive:t,size:s="icon",...c}=e;return(0,a.jsx)("a",{"aria-current":t?"page":void 0,className:(0,n.cn)((0,l.r)({variant:t?"outline":"ghost",size:s}),r),...c})};u.displayName="PaginationLink";let f=e=>{let{className:r,...t}=e;return(0,a.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 pl-2.5",r),...t,children:[(0,a.jsx)(c.YJP,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]})};f.displayName="PaginationPrevious";let m=e=>{let{className:r,...t}=e;return(0,a.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 pr-2.5",r),...t,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(c.vKP,{className:"h-4 w-4"})]})};m.displayName="PaginationNext";let h=e=>{let{className:r,...t}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,n.cn)("flex h-9 w-9 items-center justify-center",r),...t,children:[(0,a.jsx)(c.Oer,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};h.displayName="PaginationEllipsis"},7216:(e,r,t)=>{"use strict";t.d(r,{BK:()=>i,eu:()=>c,q5:()=>o});var a=t(7876),s=t(4232),n=t(8194),l=t(8928);let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n.bL,{ref:r,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});c.displayName=n.bL.displayName;let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n._V,{ref:r,className:(0,l.cn)("aspect-square h-full w-full",t),...s})});i.displayName=n._V.displayName;let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n.H4,{ref:r,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});o.displayName=n.H4.displayName},7368:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var a=t(7876),s=t(4232),n=t(9099),l=t(7446),c=t(369),i=t(9567),o=t(1379),d=t(4587),u=t.n(d),f=t(3397),m=t(9081),h=t(7216),x=t(9516),p=t(5037),g=t(9983),j=t(7117),N=t(7271),v=t(8434),b=t(4846);function w(){let e=(0,n.useRouter)(),{page:r}=e.query,[t,c]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[w,y]=(0,s.useState)(r?parseInt(r):1),[S,k]=(0,s.useState)(1),[_,C]=(0,s.useState)(!1),[E,P]=(0,s.useState)({}),[R,A]=(0,s.useState)(!1),[I,L]=(0,s.useState)({}),[T,M]=(0,s.useState)(!1),[U,B]=(0,s.useState)(!1),{theme:F,setTheme:D}=(0,o.D)(),{toast:G}=(0,N.dj)(),{t:K}=(0,b.Bd)(),$=async e=>{try{let r=await fetch("/api/steam/profiles?ids=".concat(e.join(",")));if(!r.ok)throw Error("Failed to fetch Steam profiles");let t=await r.json();P(e=>({...e,...t}))}catch(e){console.error("Error fetching Steam profiles:",e)}},q=async e=>{if(U)try{let r=[...new Set(e)],t=await fetch("/api/users/platforms?steamids=".concat(r.join(",")));if(t.ok){let e=await t.json();L(e)}}catch(e){console.error("Error fetching FACEIT IDs:",e)}},z=async e=>{C(!0),A(!1);try{let r=new URLSearchParams({page:e.toString(),searchTerm:i}),t=await fetch("/api/users/search?".concat(r));if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to fetch users")}let a=await t.json();c(a.items),k(a.totalPages),A(0===a.items.length);let s=[...new Set(a.items.map(e=>e.steamid64))];s.length>0&&await Promise.all([$(s),q(s)])}catch(e){console.error("Error fetching users:",e),A(!0)}finally{C(!1)}};(0,s.useEffect)(()=>{r&&y(parseInt(r))},[r]),(0,s.useEffect)(()=>{(async()=>{let e=await fetch("/api/check-faceit-api"),{enabled:r}=await e.json();B(r)})()},[]);let H=e=>e?new Date(e).toLocaleString():"N/A",W=e=>{let{href:r,src:t,alt:s,onClick:n,icon:l}=e,c="/icons/csstats.svg"===t;return(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-8 h-8",children:r?(0,a.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary transition-colors justify-center",children:l?(0,a.jsx)(l,{size:24}):(0,a.jsx)(u(),{src:t||"/placeholder.svg",alt:s,width:24,height:24,style:{filter:c?"none":"invert(".concat(+("dark"===F),")")}})}):(0,a.jsx)("button",{onClick:n,className:"text-foreground hover:text-primary transition-colors",children:l?(0,a.jsx)(l,{size:24}):(0,a.jsx)(u(),{src:t||"/placeholder.svg",alt:s,width:24,height:24,style:{filter:c?"none":"invert(".concat(+("dark"===F),")")}})})})};return(0,a.jsx)(j.tE,{children:(0,a.jsxs)(m.Zp,{className:"max-w-6xl mx-auto",children:[(0,a.jsx)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(m.ZB,{className:"text-2xl font-bold",children:K("userSearch.title")})}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,a.jsx)(f.p,{placeholder:K("userSearch.searchPlaceholder"),value:i,onChange:e=>d(e.target.value),className:"flex-grow"}),(0,a.jsxs)(g.$,{onClick:()=>{y(1),z(1),M(!0)},children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),K("userSearch.searchButton")]})]}),_?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)(l.A,{className:"h-8 w-8 animate-spin"})}):(0,a.jsxs)(a.Fragment,{children:[!T&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:K("userSearch.performSearch")})}),T&&R&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:K("userSearch.noResults")})}),T&&!R&&0===t.length&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:K("userSearch.error")})}),(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,r)=>{var t,s;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,a.jsxs)(h.eu,{className:"h-12 w-12",children:[(0,a.jsx)(h.BK,{src:null===(t=E[e.steamid64])||void 0===t?void 0:t.avatarUrl,alt:e.name}),(0,a.jsx)(h.q5,{children:e.name.slice(0,2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:(null===(s=E[e.steamid64])||void 0===s?void 0:s.displayName)||e.name}),(0,a.jsxs)("div",{className:"flex text-center items-center justify-between space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground ",children:["ID64: ",e.steamid64]}),(0,a.jsx)(W,{href:"https://steamcommunity.com/profiles/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/steam.svg",alt:"steam-logo"}),(0,a.jsx)(W,{href:"/chatlog/".concat(e.steamid64),icon:p.A,alt:"chatlog-icon"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"|"}),(0,a.jsx)(W,{href:"https://csstats.gg/es/player/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/csstats.svg",alt:"csstats-logo"}),U&&(0,a.jsx)(W,{href:I[e.steamid64]?"https://www.faceit.com/en/players/".concat(I[e.steamid64]):null,src:"/icons/faceit.svg",alt:"faceit-logo",onClick:()=>{I[e.steamid64]||G({variant:"destructive",title:"An error occurred",description:"Unable to find the FACEIT profile for this user."})}})]})]})]})]}),e.cs2_ip&&(0,a.jsxs)("div",{className:"bg-secondary rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[K("userSearch.ip"),": ",e.cs2_ip]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[K("userSearch.lastSeen"),": ",H(e.cs2_last_seen)]})]})]},"".concat(e.steamid64,"-").concat(r))})})]}),(0,a.jsx)(v.T,{currentPage:w,totalPages:S,onPageChange:r=>{y(r),e.push("/search?page=".concat(r),void 0,{shallow:!0}),window.scrollTo(0,0)},className:"mt-6"})]})]})})}function y(){let e=(0,n.useRouter)(),[r,t]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(async function(){try{let r=await fetch("/api/auth/session");(await r.json()).user?d(!0):e.push("/login")}catch(r){console.error("Error fetching user:",r),e.push("/login")}finally{t(!1)}})()},[e]),r)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsx)(l.A,{className:"h-8 w-8 animate-spin text-primary"})}):o?(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,a.jsx)(w,{})}),(0,a.jsx)(i.A,{})]}):null}},8194:(e,r,t)=>{"use strict";t.d(r,{H4:()=>b,_V:()=>v,bL:()=>N});var a=t(4232),s=t(1844),n=t(2146),l=t(1285),c=t(6326),i=t(7876),o="Avatar",[d,u]=(0,s.A)(o),[f,m]=d(o),h=a.forwardRef((e,r)=>{let{__scopeAvatar:t,...s}=e,[n,l]=a.useState("idle");return(0,i.jsx)(f,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,i.jsx)(c.sG.span,{...s,ref:r})})});h.displayName=o;var x="AvatarImage",p=a.forwardRef((e,r)=>{let{__scopeAvatar:t,src:s,onLoadingStatusChange:o=()=>{},...d}=e,u=m(x,t),f=function(e,r){let[t,s]=a.useState("idle");return(0,l.N)(()=>{if(!e){s("error");return}let t=!0,a=new window.Image,n=e=>()=>{t&&s(e)};return s("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,r&&(a.referrerPolicy=r),()=>{t=!1}},[e,r]),t}(s,d.referrerPolicy),h=(0,n.c)(e=>{o(e),u.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==f&&h(f)},[f,h]),"loaded"===f?(0,i.jsx)(c.sG.img,{...d,ref:r,src:s}):null});p.displayName=x;var g="AvatarFallback",j=a.forwardRef((e,r)=>{let{__scopeAvatar:t,delayMs:s,...n}=e,l=m(g,t),[o,d]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==l.imageLoadingStatus?(0,i.jsx)(c.sG.span,{...n,ref:r}):null});j.displayName=g;var N=h,v=p,b=j},8434:(e,r,t)=>{"use strict";t.d(r,{T:()=>l});var a=t(7876),s=t(4232),n=t(5959);function l(e){let{currentPage:r,totalPages:t,onPageChange:l,className:c}=e,i=!function(e){let[r,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==r&&t(a.matches);let s=()=>t(a.matches);return a.addEventListener("change",s),()=>a.removeEventListener("change",s)},[r,e]),r}("(max-width: 640px)")?5:3;return(0,a.jsx)(n.dK,{className:c,children:(0,a.jsxs)(n.Iu,{className:"gap-1",children:[(0,a.jsx)(n.cU,{children:(0,a.jsx)(n.Eb,{onClick:()=>l(Math.max(1,r-1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:1===r})}),(()=>{let e=[],s=Math.max(1,r-Math.floor(i/2)),c=Math.min(t,s+i-1);c-s+1<i&&(s=Math.max(1,c-i+1)),s>1&&(e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>l(1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"1"})},"start")),s>2&&e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"start-ellipsis")));for(let t=s;t<=c;t++)e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>l(t),isActive:r===t,className:r===t?"bg-accent text-accent-foreground border-border":"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:t})},t));return c<t&&(c<t-1&&e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"end-ellipsis")),e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>l(t),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:t})},"end"))),e})(),(0,a.jsx)(n.cU,{children:(0,a.jsx)(n.WA,{onClick:()=>l(Math.min(t,r+1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:r===t})})]})})}},9081:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>c});var a=t(7876),s=t(4232),n=t(8928);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});l.displayName="Card";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});c.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...s})});i.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},9567:(e,r,t)=>{"use strict";t.d(r,{A:()=>c});var a=t(7876),s=t(8230),n=t.n(s),l=t(4846);function c(){let{t:e}=(0,l.Bd)();return(0,a.jsx)("footer",{className:"py-6 text-center border-t border-border",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)(n(),{href:"/",className:"hover:text-primary transition-colors",children:"ChatPanel"})," ",e("footer.copyright")," \xa9 | ",e("footer.designBy")," ",(0,a.jsx)(n(),{href:"https://lucauy.dev",target:"_blank",rel:"nofollow",className:"hover:text-primary transition-colors",children:"Luca."})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[808,369,636,593,792],()=>r(594)),_N_E=e.O()}]);